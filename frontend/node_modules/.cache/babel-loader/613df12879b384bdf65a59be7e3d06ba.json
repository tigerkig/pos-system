{"ast":null,"code":"import _objectWithoutProperties from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"E:/React/pos-system/main/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _excluded=[\"onChange\",\"name\"];import React from'react';import classNames from'classnames';import AutoSuggest from'react-autosuggest';import LocaleCurrency from'locale-currency';import cc from'country-code';import _ from'lodash';import'flag-icon-css/css/flag-icon.css';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countries=associateCurrencies(countriesWithCurrency(cc.countries));function associateCurrencies(countries){return _.map(countries,function(country){return _objectSpread(_objectSpread({},country),{},{currencyCode:LocaleCurrency.getCurrency(country.alpha2)});});}function countriesWithCurrency(countries){return _.filter(countries,function(country){return!!LocaleCurrency.getCurrency(country.alpha2);});}function stringStartsWith(s,fragment){return s.indexOf(fragment)===0;}function stringContains(s,fragment){return s.indexOf(fragment)!==-1;}function getSuggestions(){var arg=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var value=arg.trim().toUpperCase();return value===''?countries:_.filter(countries,function(country){return stringStartsWith(country.currencyCode,value)||stringContains(country.name.toUpperCase(),value);});}function getSuggestionValue(country){return country.currencyCode;}function renderSuggestion(_ref){var name=_ref.name,countryCode=_ref.alpha2,currencyCode=_ref.currencyCode;var iconClasses=classNames('flag-icon',\"flag-icon-\".concat(countryCode.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"inputContainer\",children:[/*#__PURE__*/_jsx(\"span\",{className:iconClasses}),\"\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:\"country-name\",children:[name,\" (\",currencyCode,\")\"]})]});}var _default=/*#__PURE__*/function(_React$Component){_inherits(_default,_React$Component);var _super=_createSuper(_default);function _default(props){var _this;_classCallCheck(this,_default);_this=_super.call(this,props);_this.onChange=function(ev,_ref2){var newValue=_ref2.newValue;_this.setState({value:newValue});};_this.onSuggestionsFetchRequested=function(_ref3){var value=_ref3.value;_this.setState({suggestions:getSuggestions(value)});};_this.onSuggestionsClearRequested=function(){_this.setState({suggestions:[]});};_this.onSuggestionSelected=function(ev,_ref4){var suggestionValue=_ref4.suggestionValue;var name=_this.props.name;// this.props.onChange({target: {\n// \tname,\n// \tvalue: suggestionValue,\n// }})\n};_this.state={value:props.value,suggestions:getSuggestions(props.value)};return _this;}_createClass(_default,[{key:\"componentDidCatch\",value:function componentDidCatch(error,info){console.log(error);console.log(info);}},{key:\"render\",value:function render(){var _this$state=this.state,value=_this$state.value,suggestions=_this$state.suggestions;var _this$props=this.props,onChange=_this$props.onChange,name=_this$props.name,passProps=_objectWithoutProperties(_this$props,_excluded);var inputProps=_objectSpread(_objectSpread({},passProps),{},{value:value,placeholder:\"USD or United...\",onChange:this.onChange});return/*#__PURE__*/_jsx(\"div\",{className:\"select-currency\",children:/*#__PURE__*/_jsx(AutoSuggest,{suggestions:suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionSelected:getSuggestionValue,getSuggestionValue:getSuggestionValue,renderSuggestion:renderSuggestion,inputProps:inputProps,shouldRenderSuggestions:function shouldRenderSuggestions(){return true;},onSuggestionSelected:this.onSuggestionSelected})});}}]);return _default;}(React.Component);_default.defaultProps={value:''};export{_default as default};","map":{"version":3,"sources":["E:/React/pos-system/main/src/components/online/currency/index.js"],"names":["React","classNames","AutoSuggest","LocaleCurrency","cc","_","countries","associateCurrencies","countriesWithCurrency","map","country","currencyCode","getCurrency","alpha2","filter","stringStartsWith","s","fragment","indexOf","stringContains","getSuggestions","arg","value","trim","toUpperCase","name","getSuggestionValue","renderSuggestion","countryCode","iconClasses","toLowerCase","props","onChange","ev","newValue","setState","onSuggestionsFetchRequested","suggestions","onSuggestionsClearRequested","onSuggestionSelected","suggestionValue","state","error","info","console","log","passProps","inputProps","placeholder","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport AutoSuggest from 'react-autosuggest'\r\nimport LocaleCurrency from 'locale-currency'\r\nimport cc from 'country-code'\r\nimport _ from 'lodash'\r\n\r\nimport 'flag-icon-css/css/flag-icon.css'\r\nimport './style.css'\r\n\r\nconst countries = associateCurrencies(countriesWithCurrency(cc.countries))\r\n\r\nfunction associateCurrencies(countries) {\r\n\treturn _.map(countries, country => ({\r\n\t\t...country,\r\n\t\tcurrencyCode: LocaleCurrency.getCurrency(country.alpha2),\r\n\t}))\r\n}\r\n\r\nfunction countriesWithCurrency(countries) {\r\n\treturn _.filter(countries, country => !!LocaleCurrency.getCurrency(country.alpha2))\r\n}\r\n\r\nfunction stringStartsWith(s, fragment) {\r\n\treturn s.indexOf(fragment) === 0\r\n}\r\n\r\nfunction stringContains(s, fragment) {\r\n\treturn s.indexOf(fragment) !== -1\r\n}\r\n\r\nfunction getSuggestions(arg='') {\r\n\tconst value = arg.trim().toUpperCase()\r\n\treturn value === '' ? countries\r\n\t\t: _.filter(countries, country => {\r\n\t\t\treturn stringStartsWith(country.currencyCode, value)\r\n\t\t\t|| stringContains(country.name.toUpperCase(), value)\r\n\t\t})\r\n}\r\n\r\nfunction getSuggestionValue(country) {\r\n\treturn country.currencyCode\r\n}\r\n\r\nfunction renderSuggestion({name, alpha2: countryCode, currencyCode}) {\r\n\tconst iconClasses = classNames('flag-icon', `flag-icon-${countryCode.toLowerCase()}`)\r\n\treturn(\r\n\t\t<div className=\"inputContainer\">\r\n\t\t\t<span className={iconClasses} />\r\n\t\t\t&nbsp;<span className=\"country-name\">{name} ({currencyCode})</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default class extends React.Component {\r\n\r\n\tstatic propTypes = {\r\n\t\tonChange: PropTypes.func.isRequired,\r\n\t\tname: PropTypes.string.isRequired,\r\n\t\tvalue: PropTypes.string,\r\n\t};\r\n\tstatic defaultProps = {\r\n\t\tvalue: '',\r\n\t}\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tvalue: props.value,\r\n\t\t\tsuggestions: getSuggestions(props.value),\r\n\t\t}\r\n\t}\r\n\r\n\tonChange = (ev, { newValue }) => {\r\n\t\tthis.setState({ value: newValue })\r\n\t}\r\n\r\n\tonSuggestionsFetchRequested = ({ value }) => {\r\n\t\tthis.setState({ suggestions: getSuggestions(value) })\r\n\t}\r\n\r\n\tonSuggestionsClearRequested = () => {\r\n\t\tthis.setState({ suggestions: [] });\r\n\t}\r\n\r\n\t// https://github.com/moroshko/react-autosuggest#onsuggestionselected-optional\r\n\tonSuggestionSelected = (ev, { suggestionValue }) => {\r\n\t\tconst { name } = this.props\r\n\t\t// this.props.onChange({target: {\r\n\t\t// \tname,\r\n\t\t// \tvalue: suggestionValue,\r\n\t\t// }})\r\n\t}\r\n\r\n\tcomponentDidCatch(error, info) {\r\n\t\tconsole.log(error)\r\n\t\tconsole.log(info)\r\n\t}\r\n\r\n\trender() {\r\n\t    const { value, suggestions } = this.state\r\n\t    const { onChange, name, ...passProps } = this.props\r\n\t    const inputProps = {\r\n\t\t\t...passProps,\r\n\t\t\tvalue,\r\n\t\t\tplaceholder: \"USD or United...\",\r\n\t\t\tonChange: this.onChange,\r\n\t    }\r\n\t\treturn (\r\n\t\t\t<div className=\"select-currency\">\r\n\t\t\t\t<AutoSuggest\r\n\t\t\t\t\tsuggestions={suggestions}\r\n\t\t\t\t\tonSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\r\n\t\t\t\t\tonSuggestionsClearRequested={this.onSuggestionsClearRequested}\r\n\t\t\t\t\tgetSuggestionSelected={getSuggestionValue}\r\n\t\t\t\t\tgetSuggestionValue={getSuggestionValue}\r\n\t\t\t\t\trenderSuggestion={renderSuggestion}\r\n\t\t\t\t\tinputProps={inputProps}\r\n\t\t\t\t\tshouldRenderSuggestions={ () => true }\r\n\t\t\t\t\tonSuggestionSelected={this.onSuggestionSelected}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}