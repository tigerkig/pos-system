{"ast":null,"code":"import { SchemaModel } from 'schema-typed';\nimport { useRef, useCallback } from 'react';\n\nfunction useSchemaModel(formModel) {\n  var subRulesRef = useRef([]);\n  var pushFieldRule = useCallback(function (name, fieldRule) {\n    subRulesRef.current.push({\n      name: name,\n      fieldRule: fieldRule\n    });\n  }, []);\n  var removeFieldRule = useCallback(function (name) {\n    var index = subRulesRef.current.findIndex(function (v) {\n      return v.name === name;\n    });\n    subRulesRef.current.splice(index, 1);\n  }, []);\n  var getCombinedModel = useCallback(function () {\n    var realSubRules = subRulesRef.current.filter(function (v) {\n      return Boolean(v.fieldRule.current);\n    });\n    return SchemaModel.combine(formModel, SchemaModel(realSubRules.map(function (_ref) {\n      var _ref2;\n\n      var name = _ref.name,\n          fieldRule = _ref.fieldRule;\n      return _ref2 = {}, _ref2[name] = fieldRule.current, _ref2;\n    }).reduce(function (a, b) {\n      return Object.assign(a, b);\n    }, {})));\n  }, [formModel]);\n  return {\n    getCombinedModel: getCombinedModel,\n    pushFieldRule: pushFieldRule,\n    removeFieldRule: removeFieldRule\n  };\n}\n\nexport default useSchemaModel;","map":{"version":3,"sources":["E:/React/pos-system/main/node_modules/rsuite/esm/Form/useSchemaModel.js"],"names":["SchemaModel","useRef","useCallback","useSchemaModel","formModel","subRulesRef","pushFieldRule","name","fieldRule","current","push","removeFieldRule","index","findIndex","v","splice","getCombinedModel","realSubRules","filter","Boolean","combine","map","_ref","_ref2","reduce","a","b","Object","assign"],"mappings":"AAAA,SAASA,WAAT,QAA4B,cAA5B;AACA,SAASC,MAAT,EAAiBC,WAAjB,QAAoC,OAApC;;AAEA,SAASC,cAAT,CAAwBC,SAAxB,EAAmC;AACjC,MAAIC,WAAW,GAAGJ,MAAM,CAAC,EAAD,CAAxB;AACA,MAAIK,aAAa,GAAGJ,WAAW,CAAC,UAAUK,IAAV,EAAgBC,SAAhB,EAA2B;AACzDH,IAAAA,WAAW,CAACI,OAAZ,CAAoBC,IAApB,CAAyB;AACvBH,MAAAA,IAAI,EAAEA,IADiB;AAEvBC,MAAAA,SAAS,EAAEA;AAFY,KAAzB;AAID,GAL8B,EAK5B,EAL4B,CAA/B;AAMA,MAAIG,eAAe,GAAGT,WAAW,CAAC,UAAUK,IAAV,EAAgB;AAChD,QAAIK,KAAK,GAAGP,WAAW,CAACI,OAAZ,CAAoBI,SAApB,CAA8B,UAAUC,CAAV,EAAa;AACrD,aAAOA,CAAC,CAACP,IAAF,KAAWA,IAAlB;AACD,KAFW,CAAZ;AAGAF,IAAAA,WAAW,CAACI,OAAZ,CAAoBM,MAApB,CAA2BH,KAA3B,EAAkC,CAAlC;AACD,GALgC,EAK9B,EAL8B,CAAjC;AAMA,MAAII,gBAAgB,GAAGd,WAAW,CAAC,YAAY;AAC7C,QAAIe,YAAY,GAAGZ,WAAW,CAACI,OAAZ,CAAoBS,MAApB,CAA2B,UAAUJ,CAAV,EAAa;AACzD,aAAOK,OAAO,CAACL,CAAC,CAACN,SAAF,CAAYC,OAAb,CAAd;AACD,KAFkB,CAAnB;AAGA,WAAOT,WAAW,CAACoB,OAAZ,CAAoBhB,SAApB,EAA+BJ,WAAW,CAACiB,YAAY,CAACI,GAAb,CAAiB,UAAUC,IAAV,EAAgB;AACjF,UAAIC,KAAJ;;AAEA,UAAIhB,IAAI,GAAGe,IAAI,CAACf,IAAhB;AAAA,UACIC,SAAS,GAAGc,IAAI,CAACd,SADrB;AAEA,aAAOe,KAAK,GAAG,EAAR,EAAYA,KAAK,CAAChB,IAAD,CAAL,GAAcC,SAAS,CAACC,OAApC,EAA6Cc,KAApD;AACD,KANiD,EAM/CC,MAN+C,CAMxC,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACxB,aAAOC,MAAM,CAACC,MAAP,CAAcH,CAAd,EAAiBC,CAAjB,CAAP;AACD,KARiD,EAQ/C,EAR+C,CAAD,CAA1C,CAAP;AASD,GAbiC,EAa/B,CAACtB,SAAD,CAb+B,CAAlC;AAcA,SAAO;AACLY,IAAAA,gBAAgB,EAAEA,gBADb;AAELV,IAAAA,aAAa,EAAEA,aAFV;AAGLK,IAAAA,eAAe,EAAEA;AAHZ,GAAP;AAKD;;AAED,eAAeR,cAAf","sourcesContent":["import { SchemaModel } from 'schema-typed';\nimport { useRef, useCallback } from 'react';\n\nfunction useSchemaModel(formModel) {\n  var subRulesRef = useRef([]);\n  var pushFieldRule = useCallback(function (name, fieldRule) {\n    subRulesRef.current.push({\n      name: name,\n      fieldRule: fieldRule\n    });\n  }, []);\n  var removeFieldRule = useCallback(function (name) {\n    var index = subRulesRef.current.findIndex(function (v) {\n      return v.name === name;\n    });\n    subRulesRef.current.splice(index, 1);\n  }, []);\n  var getCombinedModel = useCallback(function () {\n    var realSubRules = subRulesRef.current.filter(function (v) {\n      return Boolean(v.fieldRule.current);\n    });\n    return SchemaModel.combine(formModel, SchemaModel(realSubRules.map(function (_ref) {\n      var _ref2;\n\n      var name = _ref.name,\n          fieldRule = _ref.fieldRule;\n      return _ref2 = {}, _ref2[name] = fieldRule.current, _ref2;\n    }).reduce(function (a, b) {\n      return Object.assign(a, b);\n    }, {})));\n  }, [formModel]);\n  return {\n    getCombinedModel: getCombinedModel,\n    pushFieldRule: pushFieldRule,\n    removeFieldRule: removeFieldRule\n  };\n}\n\nexport default useSchemaModel;"]},"metadata":{},"sourceType":"module"}