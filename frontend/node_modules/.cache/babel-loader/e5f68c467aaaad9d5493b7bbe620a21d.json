{"ast":null,"code":"// Headless ARIA `menubar`\nimport React, { useCallback, useRef } from 'react';\nimport isNil from 'lodash/isNil';\nimport MenuContext, { MenuActionTypes, MoveFocusTo } from './MenuContext';\nimport { KEY_VALUES, useCustom } from '../utils';\nimport { isFocusEntering, isFocusLeaving } from '../utils/events';\nimport useMenu from './useMenu';\nimport { isFocusableElement } from '../utils/dom';\n/**\n * @private\n */\n\nexport default function Menubar(_ref) {\n  var _items$activeItemInde3;\n\n  var _ref$vertical = _ref.vertical,\n      vertical = _ref$vertical === void 0 ? false : _ref$vertical,\n      children = _ref.children,\n      onActivateItem = _ref.onActivateItem;\n  var menubar = useMenu({\n    role: 'menubar'\n  });\n  var _menubar$ = menubar[0],\n      items = _menubar$.items,\n      activeItemIndex = _menubar$.activeItemIndex,\n      dispatch = menubar[1];\n  var menubarElementRef = useRef(null);\n  var onFocus = useCallback(function (event) {\n    // Focus moves inside Menubar\n    if (isFocusEntering(event) && // Skip if focus is moving to a focusable element within this menu\n    !(event.target !== event.currentTarget && isFocusableElement(event.target))) {\n      if (activeItemIndex === null) {\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.First\n        });\n      }\n    }\n  }, [activeItemIndex, dispatch]);\n  var onBlur = useCallback(function (event) {\n    // Focus moves outside of Menubar\n    if (isFocusLeaving(event)) {\n      dispatch({\n        type: MenuActionTypes.MoveFocus,\n        to: MoveFocusTo.None\n      });\n    }\n  }, [dispatch]);\n\n  var _useCustom = useCustom('Menubar'),\n      rtl = _useCustom.rtl;\n\n  var onKeyDown = useCallback(function (event) {\n    var _items$activeItemInde, _items$activeItemInde2;\n\n    var activeItemElement = isNil(activeItemIndex) ? null : (_items$activeItemInde = (_items$activeItemInde2 = items[activeItemIndex]) === null || _items$activeItemInde2 === void 0 ? void 0 : _items$activeItemInde2.element) !== null && _items$activeItemInde !== void 0 ? _items$activeItemInde : null;\n\n    switch (true) {\n      case !vertical && !rtl && event.key === KEY_VALUES.RIGHT:\n      case !vertical && rtl && event.key === KEY_VALUES.LEFT:\n      case vertical && event.key === KEY_VALUES.DOWN:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Next\n        });\n        break;\n\n      case !vertical && !rtl && event.key === KEY_VALUES.LEFT:\n      case !vertical && rtl && event.key === KEY_VALUES.RIGHT:\n      case vertical && event.key === KEY_VALUES.UP:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Prev\n        });\n        break;\n\n      case event.key === KEY_VALUES.HOME:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.First\n        });\n        break;\n\n      case event.key === KEY_VALUES.END:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Last\n        });\n        break;\n\n      case !vertical && event.key === KEY_VALUES.DOWN:\n      case vertical && !rtl && event.key === KEY_VALUES.RIGHT:\n      case vertical && rtl && event.key === KEY_VALUES.LEFT:\n        if ((activeItemElement === null || activeItemElement === void 0 ? void 0 : activeItemElement.getAttribute('aria-haspopup')) === 'menu') {\n          event.preventDefault();\n          event.stopPropagation();\n          activeItemElement.click();\n        }\n\n        break;\n\n      case event.key === KEY_VALUES.ENTER:\n      case event.key === KEY_VALUES.SPACE:\n        event.preventDefault();\n        event.stopPropagation();\n        activeItemElement === null || activeItemElement === void 0 ? void 0 : activeItemElement.click();\n        break;\n    }\n  }, [rtl, items, activeItemIndex, dispatch, vertical]); // Only used for handling click events bubbling from children\n  // Which indicates that a child menuitem is being activated\n\n  var onClick = useCallback(function (event) {\n    if (items.some(function (item) {\n      return item.element === event.target;\n    })) {\n      onActivateItem === null || onActivateItem === void 0 ? void 0 : onActivateItem(event);\n    }\n  }, [items, onActivateItem]);\n  return /*#__PURE__*/React.createElement(MenuContext.Provider, {\n    value: menubar\n  }, children({\n    role: 'menubar',\n    tabIndex: 0,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onClick: onClick,\n    'aria-activedescendant': isNil(activeItemIndex) ? undefined : (_items$activeItemInde3 = items[activeItemIndex]) === null || _items$activeItemInde3 === void 0 ? void 0 : _items$activeItemInde3.element.id,\n    'aria-orientation': vertical ? 'vertical' : undefined // implicitly set 'horizontal'\n\n  }, menubarElementRef));\n}","map":{"version":3,"sources":["E:/React/pos-system/main/node_modules/rsuite/esm/Menu/Menubar.js"],"names":["React","useCallback","useRef","isNil","MenuContext","MenuActionTypes","MoveFocusTo","KEY_VALUES","useCustom","isFocusEntering","isFocusLeaving","useMenu","isFocusableElement","Menubar","_ref","_items$activeItemInde3","_ref$vertical","vertical","children","onActivateItem","menubar","role","_menubar$","items","activeItemIndex","dispatch","menubarElementRef","onFocus","event","target","currentTarget","type","MoveFocus","to","First","onBlur","None","_useCustom","rtl","onKeyDown","_items$activeItemInde","_items$activeItemInde2","activeItemElement","element","key","RIGHT","LEFT","DOWN","preventDefault","stopPropagation","Next","UP","Prev","HOME","END","Last","getAttribute","click","ENTER","SPACE","onClick","some","item","createElement","Provider","value","tabIndex","undefined","id"],"mappings":"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","sourcesContent":["// Headless ARIA `menubar`\nimport React, { useCallback, useRef } from 'react';\nimport isNil from 'lodash/isNil';\nimport MenuContext, { MenuActionTypes, MoveFocusTo } from './MenuContext';\nimport { KEY_VALUES, useCustom } from '../utils';\nimport { isFocusEntering, isFocusLeaving } from '../utils/events';\nimport useMenu from './useMenu';\nimport { isFocusableElement } from '../utils/dom';\n\n/**\n * @private\n */\nexport default function Menubar(_ref) {\n  var _items$activeItemInde3;\n\n  var _ref$vertical = _ref.vertical,\n      vertical = _ref$vertical === void 0 ? false : _ref$vertical,\n      children = _ref.children,\n      onActivateItem = _ref.onActivateItem;\n  var menubar = useMenu({\n    role: 'menubar'\n  });\n  var _menubar$ = menubar[0],\n      items = _menubar$.items,\n      activeItemIndex = _menubar$.activeItemIndex,\n      dispatch = menubar[1];\n  var menubarElementRef = useRef(null);\n  var onFocus = useCallback(function (event) {\n    // Focus moves inside Menubar\n    if (isFocusEntering(event) && // Skip if focus is moving to a focusable element within this menu\n    !(event.target !== event.currentTarget && isFocusableElement(event.target))) {\n      if (activeItemIndex === null) {\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.First\n        });\n      }\n    }\n  }, [activeItemIndex, dispatch]);\n  var onBlur = useCallback(function (event) {\n    // Focus moves outside of Menubar\n    if (isFocusLeaving(event)) {\n      dispatch({\n        type: MenuActionTypes.MoveFocus,\n        to: MoveFocusTo.None\n      });\n    }\n  }, [dispatch]);\n\n  var _useCustom = useCustom('Menubar'),\n      rtl = _useCustom.rtl;\n\n  var onKeyDown = useCallback(function (event) {\n    var _items$activeItemInde, _items$activeItemInde2;\n\n    var activeItemElement = isNil(activeItemIndex) ? null : (_items$activeItemInde = (_items$activeItemInde2 = items[activeItemIndex]) === null || _items$activeItemInde2 === void 0 ? void 0 : _items$activeItemInde2.element) !== null && _items$activeItemInde !== void 0 ? _items$activeItemInde : null;\n\n    switch (true) {\n      case !vertical && !rtl && event.key === KEY_VALUES.RIGHT:\n      case !vertical && rtl && event.key === KEY_VALUES.LEFT:\n      case vertical && event.key === KEY_VALUES.DOWN:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Next\n        });\n        break;\n\n      case !vertical && !rtl && event.key === KEY_VALUES.LEFT:\n      case !vertical && rtl && event.key === KEY_VALUES.RIGHT:\n      case vertical && event.key === KEY_VALUES.UP:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Prev\n        });\n        break;\n\n      case event.key === KEY_VALUES.HOME:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.First\n        });\n        break;\n\n      case event.key === KEY_VALUES.END:\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch({\n          type: MenuActionTypes.MoveFocus,\n          to: MoveFocusTo.Last\n        });\n        break;\n\n      case !vertical && event.key === KEY_VALUES.DOWN:\n      case vertical && !rtl && event.key === KEY_VALUES.RIGHT:\n      case vertical && rtl && event.key === KEY_VALUES.LEFT:\n        if ((activeItemElement === null || activeItemElement === void 0 ? void 0 : activeItemElement.getAttribute('aria-haspopup')) === 'menu') {\n          event.preventDefault();\n          event.stopPropagation();\n          activeItemElement.click();\n        }\n\n        break;\n\n      case event.key === KEY_VALUES.ENTER:\n      case event.key === KEY_VALUES.SPACE:\n        event.preventDefault();\n        event.stopPropagation();\n        activeItemElement === null || activeItemElement === void 0 ? void 0 : activeItemElement.click();\n        break;\n    }\n  }, [rtl, items, activeItemIndex, dispatch, vertical]); // Only used for handling click events bubbling from children\n  // Which indicates that a child menuitem is being activated\n\n  var onClick = useCallback(function (event) {\n    if (items.some(function (item) {\n      return item.element === event.target;\n    })) {\n      onActivateItem === null || onActivateItem === void 0 ? void 0 : onActivateItem(event);\n    }\n  }, [items, onActivateItem]);\n  return /*#__PURE__*/React.createElement(MenuContext.Provider, {\n    value: menubar\n  }, children({\n    role: 'menubar',\n    tabIndex: 0,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onClick: onClick,\n    'aria-activedescendant': isNil(activeItemIndex) ? undefined : (_items$activeItemInde3 = items[activeItemIndex]) === null || _items$activeItemInde3 === void 0 ? void 0 : _items$activeItemInde3.element.id,\n    'aria-orientation': vertical ? 'vertical' : undefined // implicitly set 'horizontal'\n\n  }, menubarElementRef));\n}"]},"metadata":{},"sourceType":"module"}